"use strict";$(function(){function e(){$(".modal-success").fadeIn(300),$(".overlay").show()}function i(){$(".gallery__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,prevArrow:$(".gallery__slider-arr_left"),nextArrow:$(".gallery__slider-arr_right"),fade:!1,infinite:!1,lazyLoad:"ondemand"}),$(".rivertime-video__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,prevArrow:$(".rivertime-video__slider-arr_left"),nextArrow:$(".rivertime-video__slider-arr_right"),fade:!1,asNavFor:".rivertime-video__nav",infinite:!0}),$(".rivertime-video__nav").slick({slidesToShow:3,slidesToScroll:1,respondTo:"slider",dots:!1,arrows:!1,centerMode:!1,asNavFor:".rivertime-video__slider"}),$(".deephouse-video__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,prevArrow:$(".deephouse-video__slider-arr_left"),nextArrow:$(".deephouse-video__slider-arr_right"),fade:!1,asNavFor:".deephouse-video__nav",infinite:!0}),$(".deephouse-video__nav").slick({slidesToShow:3,slidesToScroll:1,dots:!1,arrows:!1,centerMode:!1,focusOnSelect:!0,asNavFor:".deephouse-video__slider"}),$(".members-info__slider").slick({slidesToShow:3,slidesToScroll:1,dots:!1,arrows:!0,centerMode:!1,focusOnSelect:!0,prevArrow:$(".members__nav-arr_left"),nextArrow:$(".members__nav-arr_right"),draggable:!1})}function r(e){var i=!0;if(e.find(".order-form__input-container_error").length)i=!1;else{var r=e.find(".order-form__input");r.each(function(e,r){$(r).val()||($(r).parent().addClass("order-form__input-container_error"),$(r).parent().removeClass("order-form__input-container_success"),i=!1)})}return i}function o(e){var i=$(e).attr("data-src");$(e).html('<iframe class="video__video" src="'.concat(i,'&autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}function s(e,i,r){r?$(".".concat(e)).parent().find(".".concat(e,"-arr_").concat(i)).addClass("".concat(e,"-arr_disable")):$(".".concat(e)).parent().find(".".concat(e,"-arr_").concat(i)).removeClass("".concat(e,"-arr_disable"))}function n(e){e.addClass("main-section__menu-item_active"),e.siblings().removeClass("main-section__menu-item_active")}function a(e,i){e.removeClass("section_hidden"),i.addClass("section_hidden")}function t(e,i,r){e.addClass("revealator-slideup revealator-duration".concat(i," revealator-once revealator-delay").concat(r))}function d(){t($(".members-info__genres, .members-info__genres-title, .members-info__desc, .members-info__slider, .members-info__group"),5,9),t($(".members__slider-nav"),5,10),t($(".rivertime-video__title"),5,2),t($(".rivertime-video__slider"),5,1),t($(".rivertime-video__slider-arr"),5,7),t($(".rivertime-video__nav"),5,6),window.location.hash="#rivertime",$(".deephouse__pic").addClass("revealator-fade revealator-duration3 revealator-once revealator-delay1"),setTimeout(function(){$(".members-info__slider").slick("refresh"),$(".rivertime-video__slider").slick("refresh")},100)}function l(){window.location.hash="#deephousesax",t($(".deephouse-video-info__genres, .deephouse-video-info__desc"),5,9),t($(".deephouse-video__slider"),5,6),t($(".deephouse-video__slider-arr"),5,7),t($(".deephouse-video__nav"),5,6),setTimeout(function(){return $(".deephouse-video__slider").slick("refresh")},100)}function c(){var e=parseInt(document.documentElement.clientWidth),i=parseInt(window.innerWidth),r=i-e;$("body").css("margin-right",-r),$("html").addClass("disabled-scroll")}function _(){$("html").removeClass("disabled-scroll")}setTimeout(function(){return i()},100),$(".members-info__slider").on("init",function(e,i){$(".members__slider-count_total").text("0"+i.slideCount)}),$(".rivertime-video__slide, .deephouse-video__slide").on("click",function(){o($(this))}),$(".rivertime-video__slider").on("afterChange",function(e,i,r){r+1===i.slideCount?s("rivertime-video__slider","right",!0):s("rivertime-video__slider","right",!1),0===r?s("rivertime-video__slider","left",!0):s("rivertime-video__slider","left",!1)}),$(".deephouse-video__slider").on("afterChange",function(e,i,r){r+1===i.slideCount?s("deephouse-video__slider","right",!0):s("deephouse-video__slider","right",!1),0===r?s("deephouse-video__slider","left",!0):s("deephouse-video__slider","left",!1)}),$(".overlay").on("click",function(){$(this).hide(),$(".modal-success").fadeOut(300)}),$(".order-form").on("submit",function(i){if(i.preventDefault(),r($(this))){var o=$(this).serializeArray();$.ajax({url:"https://cors-anywhere.herokuapp.com/http://novichkov.asap-lp.ru/mail/index.php",type:"POST",data:o,success:function(){e()},error:function(e){console.log(e)},dataType:"json"});var s=$(this).find(".order-form__input-container");s.each(function(e,i){$(i).removeClass("order-form__input-container_focused").removeClass("order-form__input-container_success")}),$(this)[0].reset()}}),$(".members-info__slider").on("afterChange",function(e,i,r){$(".members__slider-count_cur").text("0"+(r+1)),r+1===i.slideCount?$(".members-info__slider").closest(".members__slider-container").find(".members__nav-arr_right").addClass("members__nav-arr_disable"):$(".members-info__slider").closest(".members__slider-container").find(".members__nav-arr_right").removeClass("members__nav-arr_disable"),0===r?$(".members-info__slider").closest(".members__slider-container").find(".members__nav-arr_left").addClass("members__nav-arr_disable"):$(".members-info__slider").closest(".members__slider-container").find(".members__nav-arr_left").removeClass("members__nav-arr_disable")}),$(window).on("scroll",function(){$(window).scrollTop()+$(window).height()>=$(".video-wrapper:first").offset().top&&setTimeout(function(){return $(".video-wrapper:first").delay(2e3).addClass("video-wrapper_visible")},0),$(window).scrollTop()+$(window).height()>=$(".video-wrapper:last").offset().top&&setTimeout(function(){return $(".video-wrapper:last").addClass("video-wrapper_visible")},0)}),Revealator.effects_padding=-700,Revealator.scroll_padding=-500,"#rivertime"===window.location.hash&&($(".main-container").addClass("main-container_rivertime"),$(".main-section").addClass("disable-animation"),a($(".members, .rivertime-video, .deephouse"),$(".voice, .gallery, .rivertime, .deephouse-video")),n($(".main-section__menu-item_cover")),d()),"#deephousesax"===window.location.hash&&($(".main-container").addClass("main-container_deephouse"),$(".main-section").addClass("disable-animation"),a($(".deephouse-video"),$(".voice, .gallery, .rivertime, .members, .rivertime-video, .deephouse")),n($(".main-section__menu-item_deephouse")),l()),$(".main-section__order-btn").on("click",function(e){e.preventDefault();var i=$(".clients").offset().top+$(".clients").height();$("html, body").animate({scrollTop:i},700)}),$(".main-section__readmore-btn").on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(".container").height()},500)}),$(".order-form__input").on("focus",function(){$(this).parent().addClass("order-form__input-container_focused")}),$(".order-form__input").on("blur",function(){$(this).val()||$(this).parent().removeClass("order-form__input-container_focused"),$(this).hasClass("order-form__phone")&&!$(this).val().match(/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){6,14}(\s*)?$/)||$(this).hasClass("order-form__name")&&!$(this).val()||$(this).hasClass("order-form__date")&&!$(this).val().match(/^[0-9]+$/)?($(this).parent().addClass("order-form__input-container_error"),$(this).parent().removeClass("order-form__input-container_success")):($(this).parent().removeClass("order-form__input-container_error"),$(this).parent().addClass("order-form__input-container_success"))}),$(".rivertime__pic, .deephouse__pic").on("click",function(){$("html, body").animate({scrollTop:$(this).offset().top},500),c(),$(this).hasClass("deephouse__pic")?($(".deephouse-wrapper").addClass("deephouse-wrapper_clicked"),$(".main-container").removeClass("main-container_rivertime"),$(".main-container").addClass("main-container_deephouse"),$("html, body").animate({scrollTop:0},100,function(){$(".deephouse__pic").animate({opacity:0},300,function(){$(".deephouse__pic").css({opacity:1}),$(".deephouse-wrapper").removeClass("deephouse-wrapper_clicked")}),n($(".main-section__menu-item_deephouse")),a($(".deephouse-video"),$(".voice, .gallery, .rivertime, .members, .rivertime-video, .deephouse")),_(),l()})):($(".rivertime-wrapper").addClass("rivertime-wrapper_clicked"),$(".main-container").addClass("main-container_rivertime"),$(".main-container").removeClass("main-container_deephouse"),$("html, body").animate({scrollTop:0},100,function(){$(".rivertime__pic").animate({opacity:0},300,function(){$(".rivertime__pic").css({opacity:1}),$(".rivertime-wrapper").removeClass("rivertime-wrapper_clicked")}),n($(".main-section__menu-item_cover")),a($(".members, .rivertime-video, .deephouse"),$(".voice, .gallery, .rivertime, .deephouse-video")),_(),d()}))}),$(".modal-success__btn").on("click",function(){$(".overlay").fadeOut(300,function(){$(this).removeClass("overlay_active")}),$(".modal").fadeOut(300,function(){$(this).removeClass("modal_active")})}),$(".video__stub").on("click",function(){var e=$(this).attr("data-src");$(this).after('<iframe class="video__video" src="'.concat(e,'&autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}),$(".main-section__menu-item_solo").on("click",function(){window.location.hash="",$(".main-section").addClass("disable-animation"),$(".main-container").removeClass("main-container_deephouse"),$(".main-container").removeClass("main-container_rivertime"),a($(".voice, .gallery, .rivertime"),$(".members, .rivertime-video, .deephouse, .deephouse-video")),n($(".main-section__menu-item_solo")),setTimeout(function(){return $(".gallery__slider").slick("refresh")},100)}),$(".main-section__menu-item_cover").on("click",function(){window.location.hash="#rivertime",$(".main-section").addClass("disable-animation"),$(".main-container").removeClass("main-container_deephouse"),$(".main-container").addClass("main-container_rivertime"),n($(".main-section__menu-item_cover")),a($(".members, .rivertime-video, .deephouse"),$(".voice, .gallery, .rivertime, .deephouse-video")),d()}),$(".main-section__menu-item_deephouse").on("click",function(){window.location.hash="#deephousesax",$(".main-section").addClass("disable-animation"),$(".main-container").addClass("main-container_deephouse"),$(".main-container").removeClass("main-container_rivertime"),n($(".main-section__menu-item_deephouse")),a($(".deephouse-video"),$(".voice, .gallery, .rivertime, .members, .rivertime-video, .deephouse")),l()})});